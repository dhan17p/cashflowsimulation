sap.ui.define(["sap/m/MessageToast","sap/ui/model/json/JSONModel"],function(t,e){"use strict";return{calculatecashflow:async function(t){debugger;var n;var a;async function r(){function t(){const t=window.location.href;const e=t.match(/contractAdjustLoan\(([^)]+)\)/);if(!e)return false;const n=e[1];const a=/(\w+)=('[^']*'|[^,]+)/g;let r={};let i;while((i=a.exec(n))!==null){const t=i[1];const e=i[2];r[t]=e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e}return r.IsActiveEntity==="true"}function e(t){if(!t)return null;const e=new Date(t);if(isNaN(e.getTime()))return null;const n=String(e.getDate()).padStart(2,"0");const a=String(e.getMonth()+1).padStart(2,"0");const r=e.getFullYear();return`${n}/${a}/${r}`}a=this._view.getContent()[0].getBindingContext().getObject();var r=t();let i=this._view.getModel().bindContext("/loadAmortizationFuncAdjustLoan(...)");i.setParameter("principal",String(a.commitCapital));i.setParameter("annualRate","0.04");i.setParameter("startDate",String(a.fixedFrom));i.setParameter("endDate",String(a.fixedUntil));i.setParameter("inclusiveIndicator","true");i.setParameter("contractId",String(a.ID));i.setParameter("intCalMt",String(a.intCalMt));i.setParameter("isActiveEntity",String(r));let o=await i.execute();n=i}await r.call(this);console.log(n);let i=n.getBoundContext().getValue().value;var o={rows:i};sap.ui.getCore().setModel(new e(o),"test1");function s(t){if(!t)return"";const e=t.split("-");return e[1]+"/"+e[2]+"/"+e[0]}debugger;var l=s(a.fixedFrom);var c=s(a.fixedUntil);var u=new sap.ui.model.json.JSONModel({startFromNew:l,EndFromOldNew:c});sap.ui.getCore().setModel(u,"NewStartEnd");function d(){const t=window.location.href;const e=t.match(/contractAdjustLoan\((.*)\)/);if(e){let t=e[1];return t}return null}let g=d();if(g){this.getRouting().navigateToRoute("ConditionItemsAdjustLoanAdjustmentCashFlowPage",{key:g})}}}});
//# sourceMappingURL=Cashflow.js.map