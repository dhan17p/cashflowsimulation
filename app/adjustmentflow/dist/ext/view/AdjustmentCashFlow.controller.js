sap.ui.define(["sap/fe/core/PageController","sap/ui/model/json/JSONModel"],function(e,t){"use strict";return e.extend("adjustmentflow.ext.view.AdjustmentCashFlow",{onInit:function(){e.prototype.onInit.apply(this,arguments);this.getAppComponent().getRouter().attachRouteMatched(this._onObjectMatched,this)},_onObjectMatched:async function(e){debugger;const o=window.location.href;const a=o.match(/ID=([0-9a-fA-F-]+)/);let n=null;if(a){n=a[1]}console.log("Contract ID:",n);let s=this.getModel().bindContext("/getcontractDetails(...)");s.setParameter("contractId",n);var r=await s.execute();var l=s.getBoundContext().getValue();var d=l.fixedFrom;var i=l.fixedUntil;function c(e){if(!e)return"";const t=e.split("-");return t[1]+"/"+t[2]+"/"+t[0]}var u=c(d);var g=c(i);var h=new sap.ui.model.json.JSONModel({startFromOld:u,EndFromOld:g});debugger;this.setModel(h,"OldfixedDates");var w=sap.ui.getCore().getModel("NewStartEnd");this.setModel(w,"NewfixedDates");var f=sap.ui.getCore().getModel("OldTable");var p=f.getData().rows;this.setModel(new t({rows:p}),"OldTableAdjustScreen");const M=p.reduce((e,t)=>{const o=t.name;const a=parseFloat(t.amount)||0;if(!e[o]){e[o]=0}e[o]+=a;return e},{});Object.keys(M).forEach(e=>{M[e]=parseFloat(M[e].toFixed(2))});console.log(M);this.setModel(new t(M),"OldTableTotals");var f=sap.ui.getCore().getModel("NewTable");var p=f.getData().rows;this.setModel(new t({rows:p}),"NewTableAdjustScreen");const m=p.reduce((e,t)=>{const o=t.name;const a=parseFloat(t.amount)||0;if(!e[o]){e[o]=0}e[o]+=a;return e},{});Object.keys(m).forEach(e=>{m[e]=parseFloat(m[e].toFixed(2))});console.log(m);this.setModel(new t(m),"NewTableTotals")}})});
//# sourceMappingURL=AdjustmentCashFlow.controller.js.map