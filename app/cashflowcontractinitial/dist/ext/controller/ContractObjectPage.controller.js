sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(t){"use strict";function e(t,e){let n;return function(){const o=this;const i=arguments;clearTimeout(n);n=setTimeout(()=>t.apply(o,i),e)}}function n(){var t=sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::table::contractToCondition::LineItem::ConditionItems4");if(!t){console.warn("SmartTable not found");return}if(!t.mAggregations||!t.mAggregations._content){console.warn("No _content yet, skipping setWidth");return}var e=t.mAggregations._content;if(!e||!e.getColumns){console.warn("Inner table not ready yet");return}var n=e.getColumns();var o;var i=window.matchMedia("(min-width: 1400px)").matches;if(i){o=["12%","8%","5%","7%","20%","10%","8%","8%"]}else{o=["12.5rem","8.2rem","5.5rem","7rem","19rem","9.5rem","8.2rem","8.2rem"]}n.forEach(function(t,e){if(o[e]){t.setWidth(o[e])}})}return t.extend("cashflowcontractinitial.ext.controller.ContractObjectPage",{override:{onInit:function(){var t=this.base.getExtensionAPI().getModel()},onAfterRendering:function(){debugger;debugger;var t=e(n,250);window.addEventListener("resize",t);n()},routing:{onAfterBinding:function(){debugger;const t=sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::FormContainer::Fixed::FormElement::DataField::fixedFrom::Field-edit");const e=sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::FormContainer::Fixed::FormElement::DataField::fixedFrom::Field-display");const o=sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::FormContainer::Fixed::FormElement::DataField::fixedUntil::Field-edit");const i=sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::FormContainer::Fixed::FormElement::DataField::fixedUntil::Field-display");if(t){t.unbindProperty("value");t.bindProperty("dateValue",{path:"fixedFrom"});t.setDisplayFormat("MM/dd/yyyy");t.setValueFormat("yyyy/MM/dd")}if(e){setTimeout(()=>{const t=e.getText();if(t){const n=new Date(t);if(!isNaN(n.getTime())){const t=String(n.getDate()).padStart(2,"0");const o=String(n.getMonth()+1).padStart(2,"0");const i=n.getFullYear();e.setText(`${o}/${t}/${i}`)}}},1e3)}if(o){o.unbindProperty("value");o.bindProperty("dateValue",{path:"fixedUntil"});o.setDisplayFormat("MM/dd/yyyy");o.setValueFormat("yyyy/MM/dd")}if(i){setTimeout(()=>{const t=i.getText();if(t){const e=new Date(t);if(!isNaN(e.getTime())){const t=String(e.getDate()).padStart(2,"0");const n=String(e.getMonth()+1).padStart(2,"0");const o=e.getFullYear();i.setText(`${n}/${t}/${o}`)}}},1e3)}function a(){const t=window.location.hash;const e=t.match(/\((.*)\)/);if(e&&e[1]){const t=e[1];const n=t.split(",");for(let t=0;t<n.length;t++){const[e,o]=n[t].split("=");if(e.trim()==="IsActiveEntity"){return o==="true"}}}return null}const r=a();let c=sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::CustomAction::adjustmentpayment");if(r==true){c.setVisible(true)}else{c.setVisible(false)}function s(){const t=sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::FacetSubSection::ConditionItems");if(!t)return;let e;try{e=t.mAggregations._grid.mAggregations.content[0].mAggregations.content.mAggregations.content.mAggregations._content}catch(t){}if(!e){setTimeout(s,1e3);return}if(!e._dateFormattingAttached){e.attachRowsUpdated(()=>{n();l(e)});e._dateFormattingAttached=true}l(e)}function l(t){if(!t.mAggregations.rows||t.mAggregations.rows.length===0)return;const e=t.mAggregations.rows;e.forEach(t=>{g(t.getCells()[1],"effectiveFrom");g(t.getCells()[6],"dueDate");g(t.getCells()[7],"calculationDate")})}function g(t,e){if(!t)return;const n=t?.mAggregations?.content?.mAggregations?.contentEdit?.[0];if(n&&n.setDisplayFormat){n.unbindProperty("value");n.bindProperty("dateValue",{path:e});n.setDisplayFormat("MM/dd/yyyy");n.setValueFormat("yyyy/MM/dd")}const o=t?.mAggregations?.content?.mAggregations?.contentDisplay;if(o&&o.setText){const t=o.getText();if(t){const e=new Date(t);if(!isNaN(e.getTime())){const t=String(e.getDate()).padStart(2,"0");const n=String(e.getMonth()+1).padStart(2,"0");const i=e.getFullYear();o.setText(`${n}/${t}/${i}`)}else{o.setText("")}}else{o.setText("")}}}s()}},editFlow:{onBeforeCreate:function(){debugger;sap.ui.core.Element.getElementById("cashflowcontractinitial::ContractObjectPage--fe::CustomAction::calCashFlow").setEnabled(false);return Promise.resolve()},onBeforeEdit:function(){debugger;sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::CustomAction::adjustmentpayment").setVisible(false)},onAfterDiscard:function(){debugger;sap.ui.core.Element.getElementById("cashflowcontractinitial::ContractObjectPage--fe::CustomAction::calCashFlow").setEnabled(true)},onAfterSave:function(){sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::CustomAction::adjustmentpayment").setVisible(true);sap.ui.core.Element.getElementById("cashflowcontractinitial::ContractObjectPage--fe::CustomAction::calCashFlow").setEnabled(true)},onBeforeDiscard:function(){sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::CustomAction::adjustmentpayment").setVisible(true)}}}})});
//# sourceMappingURL=ContractObjectPage.controller.js.map