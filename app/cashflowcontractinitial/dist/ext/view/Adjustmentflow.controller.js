sap.ui.define(["sap/fe/core/PageController","sap/ui/model/json/JSONModel"],function(t,e){"use strict";return t.extend("cashflowcontractinitial.ext.view.Adjustmentflow",{onInit:function(){t.prototype.onInit.apply(this,arguments);this.getAppComponent().getRouter().attachRouteMatched(this._onObjectMatched,this)},_onObjectMatched:function(t){debugger;debugger;try{let t=this.getView().byId("conditionItemsTable");var e=t.getBinding("items");if(e){var n=new sap.ui.model.Sorter("sequence",false);e.sort(n);e.refresh()}}catch(t){console.log("Erroor ",t)}},onComparePress:async function(t){debugger;var n=this.byId("commitCap").getValue();var o=this.byId("fixedFrom").getValue();var a=this.byId("fixedUntil").getValue();var r=this.byId("intCalMt").getSelectedItem().getText();console.log("Commit Capital:",n);console.log("Fixed From:",o);console.log("Fixed Until:",a);console.log("Interest Calc Method:",r);var i;function s(t){if(!t)return"";const e=t.split("-");return e[1]+"/"+e[2]+"/"+e[0]}var c=s(o);var g=s(a);var l=new sap.ui.model.json.JSONModel({startFromNew:c,EndFromOldNew:g});sap.ui.getCore().setModel(l,"NewStartEnd");async function d(){function t(){const t=window.location.href;const e=t.match(/Contract\(([^)]+)\)/);if(!e)return false;const n=e[1];const o=/(\w+)=('[^']*'|[^,]+)/g;let a={};let r;while((r=o.exec(n))!==null){const t=r[1];const e=r[2];a[t]=e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e}return a.IsActiveEntity==="true"}var e=t();const s=window.location.href;const c=s.match(/ID=([0-9a-fA-F\-]+)/);const g=c?c[1]:null;console.log(g);let l=this.getModel().bindContext("/loadAmortizationFuncAdjust(...)");l.setParameter("principal",String(n));l.setParameter("annualRate","0.04");l.setParameter("startDate",String(o));l.setParameter("endDate",String(a));l.setParameter("inclusiveIndicator",String("true"));l.setParameter("contractId",String(g));l.setParameter("intCalMt",String(r)),l.setParameter("isActiveEntity",e),i=await l.execute();i=l}await d.call(this);function u(){const t=window.location.href;const e=t.match(/Contract\((.*)\)/);var n=sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::ObjectPage-OPHeaderContent").mAggregations.content[0].mAggregations.items[0].mAggregations.items[0].mAggregations.items[1].mAggregations.formContainers[0].mAggregations.formElements[2].getFields()[0].getText();var o=sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::ObjectPage-OPHeaderContent").mAggregations.content[0].mAggregations.items[0].mAggregations.items[0].mAggregations.items[1].mAggregations.formContainers[0].mAggregations.formElements[3].getFields()[0].getText();if(e){let t=e[1];t+=`,status='${n}',disbursementStatus='${o}'`;return t}return null}let m=i.getBoundContext().getValue().value;var f={rows:m};sap.ui.getCore().setModel(new e(f),"test1");console.log(m);this.getAppComponent().getRouter().navTo("LoanAmortizationCompareCalcFlowPage",{key:"tttt"})},onPaymentFromChange1:function(t){debugger;var e=t.getSource();var n=e.getSelectedItem().getText();var o=e.getBindingContext();if(!o)return;var a=o.getModel();var r=o.getObject();const i={"LM(Monthly end of mo due next day)":{code:"LM",months:1},"MN(Monthly at end of period)":{code:"MN",months:1},"LQ(Quartly end of pd due nxt day)":{code:"LQ",months:3},"LS(Semiannual end of pd du nxtday)":{code:"LS",months:6},"VV(Quarterly at start of period)":{code:"VV",months:3}};function s(t){const e=t.getDay();return e!==0&&e!==6}function c(t){let e=new Date(t);while(!s(e)){e.setDate(e.getDate()+1)}return e}function g(t,e){return new Date(t,e+1,0)}function l(t){return t.toISOString().split("T")[0]}const d=new Date(r.effectiveFrom);const u=i[n];if(u){let t=new Date(d);let e=new Date(d);e.setMonth(e.getMonth()+u.months);t=c(e);a.setProperty(o.getPath()+"/frequencyInMonths",u.months);a.setProperty(o.getPath()+"/dueDate",l(e));a.setProperty(o.getPath()+"/calculationDate",l(t))}}})});
//# sourceMappingURL=Adjustmentflow.controller.js.map