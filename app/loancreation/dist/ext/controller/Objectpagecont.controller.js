sap.ui.define(["sap/ui/core/mvc/ControllerExtension"],function(e){"use strict";function t(e,t){let n;return function(){const o=this;const a=arguments;clearTimeout(n);n=setTimeout(()=>e.apply(o,a),t)}}function n(){var e=sap.ui.getCore().byId("loancreation::contractNewObjectPage--fe::table::contractToCondition::LineItem::ConditionItems4");if(!e){console.warn("SmartTable not found");return}if(!e.mAggregations||!e.mAggregations._content){console.warn("No _content yet, skipping setWidth");return}var t=e.mAggregations._content;if(!t||!t.getColumns){console.warn("Inner table not ready yet");return}var n=t.getColumns();var o;var a=window.matchMedia("(min-width: 1400px)").matches;if(a){o=["12%","8%","5%","7%","20%","10%","8%","8%"]}else{o=["12.5rem","8.2rem","5.5rem","7rem","19rem","9.5rem","8.2rem","8.2rem"]}n.forEach(function(e,t){if(o[t]){e.setWidth(o[t])}})}return e.extend("loancreation.ext.controller.Objectpagecont",{override:{onInit:function(){var e=this.base.getExtensionAPI().getModel()},onAfterRendering:function(){debugger;var e=t(n,250);window.addEventListener("resize",e);n()},routing:{onBeforeBinding1:function(){debugger;try{sap.ui.getCore().byId("cashflowcontractinitial::ContractObjectPage--fe::Form::Conditions1::Content").mAggregations.formContainers[0].getTitle().destroy()}catch(e){console.log(e)}},onAfterBinding:function(){debugger;const e=sap.ui.getCore().byId("loancreation::contractNewObjectPage--fe::FormContainer::Fixed::FormElement::DataField::fixedFrom::Field-edit");const t=sap.ui.getCore().byId("loancreation::contractNewObjectPage--fe::FormContainer::Fixed::FormElement::DataField::fixedFrom::Field-display");const o=sap.ui.getCore().byId("loancreation::contractNewObjectPage--fe::FormContainer::Fixed::FormElement::DataField::fixedUntil::Field-edit");const a=sap.ui.getCore().byId("loancreation::contractNewObjectPage--fe::FormContainer::Fixed::FormElement::DataField::fixedUntil::Field-display");if(e){e.unbindProperty("value");e.bindProperty("dateValue",{path:"fixedFrom"});e.setDisplayFormat("MM/dd/yyyy");e.setValueFormat("yyyy/MM/dd")}if(t){setTimeout(()=>{const e=t.getText();if(e){const n=new Date(e);if(!isNaN(n.getTime())){const e=String(n.getDate()).padStart(2,"0");const o=String(n.getMonth()+1).padStart(2,"0");const a=n.getFullYear();t.setText(`${o}/${e}/${a}`)}}},1e3)}if(o){o.unbindProperty("value");o.bindProperty("dateValue",{path:"fixedUntil"});o.setDisplayFormat("MM/dd/yyyy");o.setValueFormat("yyyy/MM/dd")}if(a){setTimeout(()=>{const e=a.getText();if(e){const t=new Date(e);if(!isNaN(t.getTime())){const e=String(t.getDate()).padStart(2,"0");const n=String(t.getMonth()+1).padStart(2,"0");const o=t.getFullYear();a.setText(`${n}/${e}/${o}`)}}},1e3)}function i(){const e=window.location.hash;const t=e.match(/\((.*)\)/);if(t&&t[1]){const e=t[1];const n=e.split(",");for(let e=0;e<n.length;e++){const[t,o]=n[e].split("=");if(t.trim()==="IsActiveEntity"){return o==="true"}}}return null}const r=i();let c=sap.ui.getCore().byId("loancreation::contractNewObjectPage--fe::CustomAction::adjustmentpaymentloan");if(r==true){c.setVisible(true)}else{c.setVisible(false)}function s(){const e=sap.ui.getCore().byId("loancreation::contractNewObjectPage--fe::FacetSubSection::ConditionItems");if(!e)return;let t;try{t=e.mAggregations._grid.mAggregations.content[0].mAggregations.content.mAggregations.content.mAggregations._content}catch(e){}if(!t){setTimeout(s,1e3);return}if(!t._dateFormattingAttached){t.attachRowsUpdated(()=>{n();g(t)});t._dateFormattingAttached=true}g(t)}function g(e){if(!e.mAggregations.rows||e.mAggregations.rows.length===0)return;const t=e.mAggregations.rows;t.forEach(e=>{l(e.getCells()[1],"effectiveFrom");l(e.getCells()[6],"dueDate");l(e.getCells()[7],"calculationDate")})}function l(e,t){if(!e)return;const n=e?.mAggregations?.content?.mAggregations?.contentEdit?.[0];if(n&&n.setDisplayFormat){n.unbindProperty("value");n.bindProperty("dateValue",{path:t});n.setDisplayFormat("MM/dd/yyyy");n.setValueFormat("yyyy/MM/dd")}const o=e?.mAggregations?.content?.mAggregations?.contentDisplay;if(o&&o.setText){const e=o.getText();if(e){const t=new Date(e);if(!isNaN(t.getTime())){const e=String(t.getDate()).padStart(2,"0");const n=String(t.getMonth()+1).padStart(2,"0");const a=t.getFullYear();o.setText(`${n}/${e}/${a}`)}else{o.setText("")}}else{o.setText("")}}}s()}},editFlow:{onAfterCreate:function(){debugger;return Promise.resolve()},onBeforeCreate:function(){debugger;sap.ui.core.Element.getElementById("loancreation::contractNewObjectPage--fe::CustomAction::calcualtecashflow").setEnabled(false);return Promise.resolve()},onAfterDiscard:function(){debugger;sap.ui.core.Element.getElementById("loancreation::contractNewObjectPage--fe::CustomAction::calcualtecashflow").setEnabled(true)},onBeforeEdit:function(){debugger;sap.ui.getCore().byId("loancreation::contractNewObjectPage--fe::CustomAction::adjustmentpaymentloan").setVisible(false)},onAfterSave:function(){debugger;sap.ui.core.Element.getElementById("loancreation::contractNewObjectPage--fe::CustomAction::calcualtecashflow").setEnabled(true);sap.ui.getCore().byId("loancreation::contractNewObjectPage--fe::CustomAction::adjustmentpaymentloan").setVisible(true)},onBeforeDiscard:function(){sap.ui.getCore().byId("loancreation::contractNewObjectPage--fe::CustomAction::adjustmentpaymentloan").setVisible(true)}}}})});
//# sourceMappingURL=Objectpagecont.controller.js.map